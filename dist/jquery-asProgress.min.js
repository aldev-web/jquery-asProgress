/*! jQuery asProgress - v0.1.0 - 2014-09-01
* https://github.com/amazingSurge/jquery-asProgress
* Copyright (c) 2014 amazingSurge; Licensed GPL */
!function(a,b,c,d){"use strict";function e(a){return"string"==typeof a&&-1!=a.indexOf("%")}var f="asProgress",g=a[f]=function(b,c){this.element=b,this.$element=a(b),this.options=a.extend({},g.defaults,c,this.$element.data()),this.namespace=this.options.namespace,this.classes={label:this.namespace+"__label",meter:this.namespace+"__meter"},this.$element.addClass(this.namespace),this.min=parseInt(this.$element.attr("aria-valuemin"),10)||this.options.min,this.max=parseInt(this.$element.attr("aria-valuemax"),10)||this.options.max,this.first=parseInt(this.$element.attr("aria-valuenow"),10)||this.min,this.now=this.first,this.goal=this.options.goal,this._interval=null,this.initialized=!1,this._trigger("init"),this.init()};g.defaults={namespace:"asProgress",min:0,max:100,goal:100,step:1,speed:50,delay:300,label:function(a){var b=this.getPercentage(a);return b+"%"}},g.prototype={constructor:g,init:function(){this.$meter=this.$element.find("."+this.classes.meter),this.$label=this.$element.find("."+this.classes.label),this.reset(),this.initialized=!0,this._trigger("ready")},_trigger:function(a){var b,c=arguments.length>1?Array.prototype.slice.call(arguments,1):d;c?(b=c,b.push(this)):b=this,this.$element.trigger(f+"::"+a,b),this.$element.trigger(a+"."+f,b),a=a.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)});var e="on"+a;"function"==typeof this.options[e]&&this.options[e].apply(this,c)},getPercentage:function(a){return Math.round(100*(a-this.min)/(this.max-this.min))},go:function(a){var b=this;this._clear(),e(a)&&(a=parseInt(a.replace("%",""),10),a=Math.round(a/100*(this.max-this.min))),"undefined"==typeof a&&(a=this.goal),a>this.max?a=this.max:a<this.min&&(a=this.min),setTimeout(function(){b._interval=setInterval(function(){var c,d=a-b.now;c=d>0?d<b.options.step?a:b.now+b.options.step:0>d?-d<b.options.step?a:b.now-b.options.step:a,b._update(c),b.now===a&&(clearInterval(b._interval),b._interval=null,b.now===b.goal&&b._trigger("done"))},b.options.speed)},b.options.delay)},_update:function(a){this.now=a;var b=this.getPercentage(this.now);this.$meter.css("width",b+"%"),this.$element.attr("aria-valuenow",this.now),"function"==typeof this.options.label&&this.$label.html(this.options.label.call(this,[this.now])),this._trigger("update",a)},get:function(){return this.now},start:function(){this._clear(),this._trigger("start"),this.go(this.goal)},_clear:function(){this._interval&&(clearInterval(this._interval),this._interval=null)},reset:function(){this._clear(),this._update(this.first),this._trigger("reset")},stop:function(){this._clear(),this._trigger("stop")},done:function(){this._clear(),this._update(this.goal),this._trigger("done")},destory:function(){this.$element.data(f,null),this._trigger("destory")}},a.fn[f]=function(b){if("string"!=typeof b)return this.each(function(){a.data(this,f)||a.data(this,f,new g(this,b))});var c=b,e=arguments.length>1?Array.prototype.slice.call(arguments,1):d;if(/^\_/.test(c))return!1;if(!/^(get)$/.test(c))return this.each(function(){var b=a.data(this,f);b&&"function"==typeof b[c]&&b[c].apply(b,e)});var h=this.first().data(f);return h&&"function"==typeof h[c]?h[c].apply(h,e):void 0}}(jQuery,document,window);